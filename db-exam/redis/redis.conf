# ============================================================================
# Redis 개발 환경 설정
# ============================================================================

# 네트워크 설정
bind 0.0.0.0
port 6379
protected-mode yes

# 보안 설정
requirepass dev1234

# 로깅
loglevel notice
logfile /var/log/redis/redis.log

# 데이터 영속성 (RDB + AOF)
# RDB 스냅샷
save 900 1      # 900초(15분) 동안 1개 이상의 키 변경
save 300 10     # 300초(5분) 동안 10개 이상의 키 변경
save 60 10000   # 60초(1분) 동안 10000개 이상의 키 변경

dbfilename dump.rdb
dir /data

# AOF (Append Only File)
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec  # 1초마다 디스크에 기록 (성능과 안정성 균형)

# 메모리 관리
maxmemory 256mb
maxmemory-policy allkeys-lru  # 메모리 가득 차면 가장 오래된 키 삭제

# 클라이언트 설정
timeout 300
tcp-keepalive 60
maxclients 10000

# 슬로우 로그 (느린 쿼리 기록)
slowlog-log-slower-than 10000  # 10ms 이상 걸리는 명령어 기록
slowlog-max-len 128

# 개발 편의 설정
databases 16  # 0-15번 데이터베이스 사용 가능